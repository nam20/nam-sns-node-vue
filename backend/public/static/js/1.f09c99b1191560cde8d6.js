webpackJsonp([1],{HMr9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{content:"",originImagePaths:[],removeImage:[],addImage:[]}},props:["boardId"],computed:{imagePaths:function(){return this.$store.state.board.imagePaths},board:function(){return this.$store.state.board.board},me:function(){return this.$store.state.user.me}},created:function(){var t=this;this.$store.dispatch("user/loadUser"),this.$store.dispatch("board/getBoardById",this.boardId).then(function(){t.board?(t.originImagePaths=t.board.images.map(function(t){return t.src}),t.content=t.board.content,t.$store.commit("board/loadImagePaths",t.board.images.map(function(t){return t.src}))):console.log("없음")})},methods:{submitBoard:function(){var t=this;this.addImage=this.imagePaths.filter(function(e){return!t.originImagePaths.includes(e)}),this.removeImage=this.originImagePaths.filter(function(e){return!t.imagePaths.includes(e)}),this.$store.dispatch("board/updateBoard",{content:this.content,boardId:this.boardId,addImage:this.addImage,removeImage:this.removeImage}).then(function(){t.$router.push("/")})},onChangeImages:function(t){console.log(this.$refs.image.files),console.log(t.target.files,t.target.files.forEach);var e=new FormData;[].forEach.call(t.target.files,function(t){e.append("image",t)}),this.$store.dispatch("board/uploadImages",e)},removeImagePath:function(t){this.$store.commit("board/removeImagePath",t)},onClickImageUpload:function(){this.$refs.image.click()}},beforeDestroy:function(){this.$store.commit("board/clearImagePath")}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticStyle:{"margin-bottom":"20px"}},[a("v-container",[a("v-textarea",{attrs:{label:"내용 입력"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),a("v-btn",{attrs:{color:"green",absolute:"",right:""},on:{click:t.submitBoard}},[t._v("등록")]),t._v(" "),a("input",{ref:"image",attrs:{type:"file",hidden:"",multiple:""},on:{change:t.onChangeImages}}),t._v(" "),a("v-btn",{attrs:{type:"button"},on:{click:t.onClickImageUpload}},[t._v("이미지 업로드")]),t._v(" "),a("div",t._l(t.imagePaths,function(e,o){return a("div",{key:e,staticStyle:{display:"inline-block"}},[a("img",{staticStyle:{width:"200px"},attrs:{src:e,alt:e}}),t._v(" "),a("div",[a("button",{attrs:{type:"button"},on:{click:function(e){return t.removeImagePath(o)}}},[t._v("제거")])])])}),0)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(t){a("sxi/")},null,null);e.default=r.exports},"sxi/":function(t,e){}});
//# sourceMappingURL=1.f09c99b1191560cde8d6.js.map