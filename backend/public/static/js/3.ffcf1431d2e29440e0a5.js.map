{"version":3,"sources":["webpack:///src/pages/update.vue","webpack:///./src/pages/update.vue?09cd","webpack:///./src/pages/update.vue"],"names":["update","data","content","originImagePaths","removeImage","addImage","props","computed","imagePaths","this","$store","state","board","me","user","created","_this","dispatch","boardId","then","images","map","image","src","commit","img","methods","submitBoard","_this2","filter","includes","$router","push","onChangeImages","e","console","log","$refs","files","target","forEach","imageFormData","FormData","call","f","append","removeImagePath","index","onClickImageUpload","click","beforeDestroy","pages_update","render","_vm","_h","$createElement","_c","_self","staticStyle","margin-bottom","attrs","label","model","value","callback","$$v","expression","_v","color","absolute","right","on","ref","type","hidden","multiple","change","_l","p","i","key","display","width","alt","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.ffcf1431d2e29440e0a5.js","sourcesContent":["<template>\r\n    <v-card style=\"margin-bottom:20px;\">\r\n      <v-container>\r\n          <v-textarea label=\"내용 입력\" v-model=\"content\">\r\n          </v-textarea>\r\n          \r\n          <v-btn color=\"green\" absolute right @click=\"submitBoard\">등록</v-btn>\r\n          <input type=\"file\" ref=\"image\" @change=\"onChangeImages\" hidden multiple>\r\n          <v-btn type=\"button\" @click=\"onClickImageUpload\">이미지 업로드</v-btn>\r\n          <div>\r\n          <div v-for=\"(p, i) in imagePaths\" :key=\"p\" style=\"display: inline-block\">\r\n            <img :src=\"p\" :alt=\"p\" style=\"width: 200px\">\r\n            <div>\r\n              <button @click=\"removeImagePath(i)\" type=\"button\">제거</button>\r\n            </div>\r\n          </div>\r\n         \r\n          <!-- <div v-if=\"board\">돼냐</div> -->\r\n        </div>\r\n      </v-container>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            content:'',\r\n            originImagePaths:[],\r\n            removeImage:[],\r\n            addImage:[],\r\n           \r\n          \r\n        }\r\n    },\r\n    props:['boardId'],\r\n    computed:{\r\n        // board(){\r\n        //     return this.$store.state.board.board\r\n        // },\r\n        imagePaths(){\r\n            return this.$store.state.board.imagePaths\r\n        },\r\n        board(){\r\n            return this.$store.state.board.board\r\n        },\r\n        me(){\r\n            return this.$store.state.user.me\r\n        }\r\n    },\r\n  \r\n    created(){\r\n       \r\n        this.$store.dispatch('user/loadUser')\r\n\r\n        this.$store.dispatch('board/getBoardById',this.boardId)\r\n        .then(()=>{\r\n           \r\n           \r\n            if(this.board){\r\n               \r\n                this.originImagePaths = this.board.images.map(image=>image.src)\r\n               \r\n                this.content = this.board.content\r\n                this.$store.commit('board/loadImagePaths',this.board.images.map(img => img.src))\r\n            }\r\n        })\r\n     \r\n\r\n        \r\n    },\r\n    methods:{\r\n        \r\n        submitBoard(){\r\n           \r\n            \r\n             this.addImage = this.imagePaths.filter(img=> !this.originImagePaths.includes(img))\r\n             this.removeImage = this.originImagePaths.filter(img=> !this.imagePaths.includes(img))\r\n             \r\n            this.$store.dispatch('board/updateBoard',{\r\n                content:this.content,\r\n                boardId:this.boardId,\r\n                addImage:this.addImage,\r\n                removeImage:this.removeImage\r\n            })\r\n            .then(()=>{\r\n             \r\n                \r\n                this.$router.push('/')\r\n            })\r\n        },\r\n        onChangeImages(e){\r\n            console.log(this.$refs.image.files)\r\n            console.log(e.target.files, e.target.files.forEach);\r\n            const imageFormData = new FormData();\r\n            [].forEach.call(e.target.files,(f)=>{\r\n                imageFormData.append('image',f)\r\n            })\r\n            this.$store.dispatch('board/uploadImages',imageFormData)\r\n        },\r\n        removeImagePath(index){\r\n            this.$store.commit('board/removeImagePath',index)\r\n        },\r\n        onClickImageUpload(){\r\n            this.$refs.image.click();\r\n        }\r\n    },\r\n    beforeDestroy(){\r\n        this.$store.commit('board/clearImagePath')\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/update.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('v-container',[_c('v-textarea',{attrs:{\"label\":\"내용 입력\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}}),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"green\",\"absolute\":\"\",\"right\":\"\"},on:{\"click\":_vm.submitBoard}},[_vm._v(\"등록\")]),_vm._v(\" \"),_c('input',{ref:\"image\",attrs:{\"type\":\"file\",\"hidden\":\"\",\"multiple\":\"\"},on:{\"change\":_vm.onChangeImages}}),_vm._v(\" \"),_c('v-btn',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.onClickImageUpload}},[_vm._v(\"이미지 업로드\")]),_vm._v(\" \"),_c('div',_vm._l((_vm.imagePaths),function(p,i){return _c('div',{key:p,staticStyle:{\"display\":\"inline-block\"}},[_c('img',{staticStyle:{\"width\":\"200px\"},attrs:{\"src\":p,\"alt\":p}}),_vm._v(\" \"),_c('div',[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeImagePath(i)}}},[_vm._v(\"제거\")])])])}),0)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5239b58a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/update.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5239b58a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./update.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./update.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./update.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5239b58a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./update.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/update.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}